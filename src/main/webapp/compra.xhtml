<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<meta charset="UTF-8"></meta>
	<title>Compra</title>
</h:head>

<ui:composition template="templates/template.xhtml">

	<ui:define name="content">

		<style>
body .ui-panelgrid .ui-panelgrid-cell {
	background-color: transparent;
}

.my-heading-row {
	background-color: var(--surface-c);
	font-weight: bold;
}
</style>

		<!-- Note: Rows and columns can have style, styleClass, and id. Note: A column with a defined styleClass will ignore the styleClass specified in the columnClasses list. Note: Note the use of ui-fluid to ensure that components are sized correctly and the use of ui-panelgrid-blank to remove borders. -->
		<script
			src="https://maps.google.com/maps/api/js?key=AIzaSyCvCDkYieuUBmMWon_mfLAfjuaeuosuqow&amp;sensor=false"></script>
		<!-- FORMULARIO DE COMPRA -->
		<h:form id="formCompra">
			<div class="card p-4">

				<p:panelGrid columns="4"
					columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
					layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
					style="border:0px none; background-color:transparent;">

					<p:row styleClass="my-heading-row">
                        Datos del Usuario
                    </p:row>

					<p:outputLabel for="@next" value="Nombre" />
					<p:inputText id="nombre" value="#{compraBean.nombre}"
						required="true" label="Nombre" />

					<p:outputLabel for="@next" value="Celular" />
					<p:inputText id="celular" value="#{compraBean.celular}"
						required="true" label="Celular" />

					<p:outputLabel for="@next" value="Email" />
					<p:inputText id="email" value="#{compraBean.email}" required="true"
						label="Email" />

					<p:outputLabel for="@next" value="Fecha Nacimiento" />
					<p:inputText id="fechaNacimiento"
						value="#{compraBean.fechaNacimiento}" />

					<p:outputLabel for="@next" value="Direccion" />
					<p:inputTextarea rows="2" id="direccion"
						value="#{compraBean.direccion}" />

					<p:outputLabel for="gmap" value="Mapa" />
					<p:gmap id="gmap" center="41.381542, 2.122893" zoom="15"
						type="HYBRID" style="width:100%;height:320px" streetView="true" />
				</p:panelGrid>
			</div>

			<div class="card p-4 mt-6">
				<p:dataTable var="product" value="#{dtBasicView.products}">
					<p:column headerText="ID">
						<h:outputText value="#{product.id}" />
					</p:column>

					<p:column headerText="Nombre">
						<h:outputText value="#{product.nombre}" />
					</p:column>

					<p:column headerText="Descripcion">
						<h:outputText value="#{product.descripcion}" />
					</p:column>

					<p:column headerText="Cantidad">
						<h:outputText value="#{product.cantidad}" />
					</p:column>

					<p:column headerText="Precio">
						<h:outputText value="#{product.precio}">
						<f:convertNumber type="currency" pattern="¤#0" currencySymbol="$" />
						</h:outputText>
					</p:column>
				</p:dataTable>

				<div class="mt-5">
					<p:panelGrid columns="2"
						columnClasses="ui-grid-col-10, ui-grid-col-2"
						styleClass="ui-panelgrid-blank ui-fluid "
						style="border:0; background-color:transparent;">

						<p:row styleClass="my-heading-row">
                            Zona de Pagos
                        </p:row>

						<p:row
							style="display:flex; justify-content: space-between; align-items:center; flex-wrap:nowrap;">
							<p:outputLabel value="Total a Pagar" />
							<h:outputText value="#{compraBean.total}"
								style="display:block; width:100%; text-align:right;">
								<f:convertNumber type="currency" pattern="¤#0"
									currencySymbol="$" />
							</h:outputText>
						</p:row>
					</p:panelGrid>
				</div>
			</div>

			<!-- BOTONES -->
			<div
				class="d-flex justify-content-between align-items-center p-2 w-full"
				style="gap: 1rem; margin-top: 2rem;">
				<p:button value="Volver"
					styleClass="ui-button-raised ui-button-secondary"
					href="carrito.xhtml" />
				<p:commandButton value="Comprar" styleClass="ui-button-raised"
					actionListener="#{compraBean.comprar}" icon="pi pi-shopping-cart"
					update="@form" />
			</div>

			<!-- Mensajes de validación -->
			<p:messages id="msgs" showDetail="true" closable="true" />
		</h:form>

	</ui:define>
</ui:composition>
</html>
